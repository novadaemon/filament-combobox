function u({options:o,selected:c,statePath:r,state:d,wire:g}){return{options:[],selected:[],optionsOriginal:[],selectedOriginal:[],allOptions:[],state:d,wire:g,statePath:r,searchState:{options:{active:!1,keyword:""},selected:{active:!1,keyword:""}},init:function(){this.allOptions=o,this.prepareInitialData(),this.syncDisplayWithMaster()},prepareInitialData:function(){this.optionsOriginal=[],this.selectedOriginal=[],o.forEach(i=>{let e={value:i.value,label:i.label,highlighted:!1};c.map(String).includes(String(i.value))?this.selectedOriginal.push(e):this.optionsOriginal.push(e)})},syncDisplayWithMaster:function(){if(this.searchState.options.active){let i=this.searchState.options.keyword.toLowerCase();this.options=this.optionsOriginal.filter(e=>e.label.toLowerCase().includes(i))}else this.options=[...this.optionsOriginal];if(this.searchState.selected.active){let i=this.searchState.selected.keyword.toLowerCase();this.selected=this.selectedOriginal.filter(e=>e.label.toLowerCase().includes(i))}else this.selected=[...this.selectedOriginal]},search:function(i,e){console.log("search",i,e),this.searchState[i].keyword=e,this.searchState[i].active=e.length>0,this.syncDisplayWithMaster()},toggleHighlight:function(i,e){this[i][e].highlighted=!this[i][e].highlighted},moveItem:function(i,e,t){let s=e==="options"?"optionsOriginal":"selectedOriginal",l=t==="options"?"optionsOriginal":"selectedOriginal";if(this[l].find(a=>a.value===i.value))return;let h=this[s].find(a=>a.value===i.value);h&&(this[s]=this[s].filter(a=>a.value!==i.value),this[l].push({...h,highlighted:!1}),this.syncDisplayWithMaster(),this.updateState())},moveToRight:function(){this.options.filter(e=>e.highlighted).forEach(e=>{let t=this.optionsOriginal.find(s=>s.value===e.value);t&&this.moveItem(t,"options","selected")})},moveToLeft:function(){this.selected.filter(e=>e.highlighted).forEach(e=>{let t=this.selectedOriginal.find(s=>s.value===e.value);t&&this.moveItem(t,"selected","options")})},moveToRightAll:function(){let i=this.searchState.options.active?this.options:this.optionsOriginal;i.forEach(e=>{let t=this.optionsOriginal.find(s=>s.value===e.value);t&&!this.selectedOriginal.some(s=>s.value===e.value)&&this.selectedOriginal.push({...t,highlighted:!1})}),this.optionsOriginal=this.optionsOriginal.filter(e=>!i.some(t=>t.value===e.value)),this.searchState.options.active||(this.searchState.options.keyword=""),this.syncDisplayWithMaster(),this.updateState()},moveToLeftAll:function(){let i=this.searchState.selected.active?this.selected:this.selectedOriginal;if(i.forEach(e=>{let t=this.selectedOriginal.find(s=>s.value===e.value);t&&!this.optionsOriginal.some(s=>s.value===e.value)&&this.optionsOriginal.push({...t,highlighted:!1})}),this.searchState.selected.active){let e=new Set(i.map(t=>t.value));this.selectedOriginal=this.selectedOriginal.filter(t=>!e.has(t.value))}else this.selectedOriginal=[];this.searchState.selected.active||(this.searchState.selected.keyword=""),this.syncDisplayWithMaster(),this.updateState()},updateState:function(){this.optionsOriginal=[...new Map(this.optionsOriginal.map(e=>[e.value,e])).values()],this.selectedOriginal=[...new Map(this.selectedOriginal.map(e=>[e.value,e])).values()];let i=(e,t)=>{let s=this.allOptions.findIndex(n=>n.value===e.value),l=this.allOptions.findIndex(n=>n.value===t.value);return s-l};this.optionsOriginal.sort(i),this.selectedOriginal.sort(i),this.syncDisplayWithMaster(),this.state=this.selectedOriginal.map(e=>e.value)}}}export{u as default};
